---

 - name: pull
   docker_image:
     name: "{{jenkins_image_name}}"

 - name: Ensure Jenkins bind mount directories exist
   file:
     path: "{{ item.split(':')[0] }}/init.groovy.d"
     state: directory
     recurse: yes
     owner: 1000
   with_items:
     - "{{ containers['jenkins'].mounts }}"

 - name: Start jenkins docker container
   docker_container:
     name: "jenkins"
     image: "{{jenkins_image_name}}"
     restart_policy: always
     restart: yes
     ports: "{{containers['jenkins'].port_mappings}}"
     volumes: "{{ containers['jenkins'].mounts }}"
     networks:
     - name: ci_suite_network

 - name: configure default users
   template:
     src: basic-security.groovy.j2
     dest: "{{ item.split(':')[0] }}/init.groovy.d/basic-security.groovy"
     owner: 1000
     mode: 0775
   with_items:
     - "{{ containers['jenkins'].mounts }}"
...
